(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[374],{8637:function(e,t,r){var n={"./en/translation.json":[9272,649],"./tw/translation.json":[4589,589]};function a(e){if(!r.o(n,e))return Promise.resolve().then(function(){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t});var t=n[e],a=t[0];return r.e(t[1]).then(function(){return r.t(a,19)})}a.keys=function(){return Object.keys(n)},a.id=8637,e.exports=a},9390:function(e,t,r){Promise.resolve().then(r.bind(r,368))},9797:function(e,t,r){"use strict";r.d(t,{he:function(){return c},r1:function(){return o},s0:function(){return s}});let n=(e,t)=>Math.floor(Math.random()*(t-e+1)+e),a=e=>({0:["0.875rem",8],1:["0.75rem",7],2:["0.625rem",6],3:["0.5rem",5],4:["0.375rem",4],5:["0.25rem",3],6:["0.125rem",2],7:["0px",1]})[e]||["1rem",10],s=e=>{let{count:t,isSpread:r}=e;return Array.from({length:t},(e,t)=>({position:"absolute",left:a(t)[0],top:"0px",zIndex:a(t)[1],...r&&{transform:"translate(".concat(n(100,200),"px, ").concat(n(100,200),"px) rotate(").concat(n(100,360),"deg)")},...r&&{zIndex:n(0,50)}}))},o=()=>{let e=[["16px",39],["14px",38],["12px",37],["10px",36],["8px",35],["6px",34],["4px",33],["2px",32],["0px",31]];return Array.from({length:9},(t,r)=>({position:"absolute",left:e[r][0],top:"0px",zIndex:e[r][1]}))},l=e=>({0:[-13,"12px"],1:[-11,"8px"],2:[-8,"8px"],3:[-6,"4px"],4:[-4,"0px"],5:[-3,"0px"],31:[13,"12px"],30:[11,"8px"],29:[8,"8px"],28:[6,"4px"],27:[4,"0px"],26:[3,"0px"]})[e]||[0,"0px"],i=e=>({0:[-13,"12px","0px"],1:[-13,"8px","2px"],2:[-13,"8px","2px"],3:[-11,"4px","4px"],4:[-11,"0px","4px"],5:[-11,"0px","6px"]})[e]||[-9,"0px","8px"],c=e=>{let{isSpread:t}=e;return Array.from({length:32},(e,r)=>({position:"absolute",left:i(r)[2],top:i(r)[1],transform:"rotate(".concat(i(r)[0],"deg)"),...t&&{top:l(r)[1],left:"0%"},...t&&{transform:"translateX(".concat(8*r,"px) rotate(").concat(l(r)[0],"deg)")},zIndex:r+1}))}},5951:function(e,t,r){"use strict";r.d(t,{Uv:function(){return x},bB:function(){return d},h2:function(){return c},h4:function(){return i},rQ:function(){return u}});var n=r(7437),a=r(8792),s=r(8024),o=r(7535),l=r(678);function i(e){let{lng:t}=e,r=()=>{localStorage.removeItem(l.F1)};return(0,n.jsx)("div",{className:"".concat(l.Tl," mx-auto h-14 border divination-navbar fixed inset-x-0 top-0"),children:(0,n.jsx)(a.default,{href:"/".concat(t,"/"),children:(0,n.jsx)("div",{className:"h-14 w-14",onClick:()=>r(),children:(0,n.jsx)("div",{className:"pl-4 pt-4",children:(0,n.jsx)(s.G,{icon:o.EyR,size:"xl",style:{color:"#e9d69d"}})})})})})}function c(){return(0,n.jsxs)("div",{className:"loadWrap",children:[(0,n.jsx)("div",{className:"loading first-squre"}),(0,n.jsx)("div",{className:"loading second-squre"}),(0,n.jsx)("div",{className:"loading third-squre"})]})}let d={runes:{overlayStyle:{borderRadius:"20px",background:"rgba(255, 255, 255)"},spreadsOverlayStyle:{background:"rgba(255, 255, 255)"},spreadsBorderColor:{borderColor:"rgba(255, 255, 255)"},spreadsWordColor:{color:"rgba(255, 255, 255)"},cardStyle:(0,n.jsx)(function(){return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{className:"h-[108px] w-16 rounded-[20px] grid place-items-center border-2 divination-rune-card pt-1",children:(0,n.jsx)("div",{className:"",children:(0,n.jsx)("img",{src:"/static/rune.svg",alt:"Rune card cover side"})})})})},{}),cardSvg:"/static/rune.svg"},default:{overlayStyle:{borderRadius:"5px",background:"rgba(234, 203, 132)"},spreadsOverlayStyle:{background:"rgba(234, 203, 132)"},spreadsBorderColor:{borderColor:"#EACB84"},spreadsWordColor:{color:"#F8D781"},cardStyle:(0,n.jsx)(function(){return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{className:"h-[108px] w-16 rounded-[5px] border-2 divination-card pt-1",children:(0,n.jsx)("div",{children:(0,n.jsx)("img",{src:"/static/tarot-card.svg",alt:"Tarot card cover side"})})})})},{}),cardSvg:"/static/tarot-card.svg"}};function x(e){let{func:t,title:r}=e;return(0,n.jsx)("button",{className:"border rounded-[10px] circle-button",onClick:t,children:(0,n.jsx)("div",{className:"border rounded-[10px] circle-inner-button",children:(0,n.jsx)("p",{className:"px-2",children:r})})})}let u=async e=>{try{let t=await fetch(l.Jk+"/api/v2/web/divination",{method:"POST",body:JSON.stringify(e)});if(!t.ok)throw Error("Network response was not ok");return await t.json()}catch(e){throw console.error("Error calling API:",e),e}}},368:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return p}});var n=r(7437),a=r(2265),s=r(7907),o=r(8792),l=r(425),i=r(5951),c=r(5431),d=r(9797);function x(e){let{lng:t}=e,{t:r}=(0,l.$)(t),s=(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{children:r("divination.meditation.initMessageMoonBlock")}),(0,n.jsx)("p",{children:r("divination.meditation.noteMessageMoonBlock")})]}),d=(0,n.jsx)(a.Fragment,{children:(0,n.jsx)("div",{className:"flex justify-center",children:(0,n.jsx)(o.default,{href:"/".concat(t,"/poe/prediction"),children:(0,n.jsx)(i.Uv,{title:r("divination.buttons.throw")})})})});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"pt-48 px-8",children:(0,n.jsx)("div",{className:"border-2 moon-block-cloth p-4",children:(0,n.jsxs)("div",{className:"h-48 md:h-56 flex justify-center border-2 moon-block-inner-cloth p-2 gap-8",children:[(0,n.jsx)("div",{className:"grid place-items-center",children:(0,n.jsx)("img",{className:"h-32 rotate-[24deg]",src:"/static/poe-cover.png",alt:"poe cover side"})}),(0,n.jsx)("div",{className:"grid place-items-center",children:(0,n.jsx)("img",{className:"h-32 rotate-[24deg]",src:"/static/poe-up.png",alt:"poe up side"})})]})})}),(0,n.jsx)(c.m,{message:s,buttons:d,settings:"poe"})]})}function u(e){let{lng:t,method:r,selectedStyle:o}=e,{t:x}=(0,l.$)(t),u=(0,s.useRouter)(),p=(0,s.useSearchParams)(),h=p.get("spread"),m=p.get("num"),f=o.overlayStyle,g=o.cardStyle,v=x("divination.meditation.initMessage"),j=(0,n.jsxs)(a.Fragment,{children:[(0,n.jsx)("p",{children:x("divination.meditation.checkMessage")}),(0,n.jsx)("div",{className:"flex justify-center pt-4",children:(0,n.jsx)(i.Uv,{func:()=>{T(),setTimeout(()=>{u.push("/".concat(t,"/").concat(r,"/draw/")+"?spread="+h+"&num="+m)},4e3)},title:x("divination.buttons.sure")})})]}),[b,y]=(0,a.useState)(null),[z,N]=(0,a.useState)(v),w=(0,a.useRef)(null),S=(0,a.useRef)(null),k=(0,a.useRef)(0),C=e=>{null==b?(k.current=e,y(e),N(j)):b===e?(y(null),N(v)):(k.current=e,y(e),N(j))},E=e=>{w.current&&!w.current.contains(e.target)&&(S.current&&S.current.contains(e.target)||(k.current=null,y(null),N(v)))},[F,R]=(0,a.useState)(!1),[M,H]=(0,a.useState)([]),[L,O]=(0,a.useState)([]),P=()=>{R(!F)},T=()=>{let e=k.current,t=Array.from({length:21-e+1},(t,r)=>e+r);H(e=>[...e,...t]),O(e=>[...e,...t]),setTimeout(()=>{R(!1),setTimeout(()=>{H([])},1e3)},1e3)},B=(0,d.r1)();return(0,a.useEffect)(()=>(P(),document.addEventListener("click",E),()=>{document.removeEventListener("click",E)}),[]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"pt-24 px-8",children:(0,n.jsxs)("div",{ref:w,className:"relative",children:[[[21,"translate-x-[216px]","translate-x-[216px]","z-[70]","z-[21]"],[20,"translate-x-[200px]","translate-x-[212px]","z-[69]","z-[20]"],[19,"translate-x-[184px]","translate-x-[208px]","z-[68]","z-[19]"],[18,"translate-x-[168px]","translate-x-[204px]","z-[67]","z-[18]"],[17,"translate-x-[156px]","translate-x-[200px]","z-[66]","z-[17]"],[16,"translate-x-[144px]","translate-x-[196px]","z-[65]","z-[16]"],[15,"translate-x-[132px]","translate-x-[192px]","z-[64]","z-[15]"],[14,"translate-x-[120px]","translate-x-[188px]","z-[63]","z-[14]"],[13,"translate-x-[108px]","translate-x-[184px]","z-[62]","z-[13]"],[12,"translate-x-[96px]","translate-x-[184px]","z-[61]","z-[12]"],[11,"translate-x-[88px]","translate-x-[184px]","z-[60]","z-[11]"],[10,"translate-x-[80px]","translate-x-[184px]","z-[59]","z-[10]"],[9,"translate-x-[72px]","translate-x-[184px]","z-[58]","z-[9]"],[8,"translate-x-[64px]","translate-x-[184px]","z-[57]","z-[8]"],[7,"translate-x-14","translate-x-[184px]","z-[56]","z-[7]"],[6,"translate-x-12","translate-x-[184px]","z-[55]","z-[6]"],[5,"translate-x-10","translate-x-[184px]","z-[54]","z-[5]"],[4,"translate-x-8","translate-x-[184px]","z-[53]","z-[4]"],[3,"translate-x-6","translate-x-[184px]","z-[52]","z-[3]"],[2,"translate-x-4","translate-x-[184px]","z-[51]","z-[2]"],[1,"translate-x-2","translate-x-[184px]","z-[50]","z-[1]"],[0,"","translate-x-[184px]","z-[49]","z-[0]"]].map((e,t)=>(0,n.jsxs)("div",{onClick:()=>C(e[0]),className:"transition-transform delay-300 ease-linear duration-500 will-change-transform drop-shadow-md absolute left-4 ".concat(F&&e[1]," top-0 ").concat(L.includes(e[0])?e[4]:e[3]," ").concat(M.includes(e[0])&&e[2]),children:[b===e[0]&&(0,n.jsx)("div",{className:"overlay",style:f}),g]},'"div'.concat(t,'"'))),B.map((e,t)=>(0,n.jsx)("div",{className:"drop-shadow-md",style:e,children:g},'"div-fixed-'.concat(t,'"')))]})}),(0,n.jsx)("div",{ref:S,children:(0,n.jsx)(c.m,{message:z,buttons:null,needMsgHideEffect:!1})})]})}function p(e){let{params:{lng:t,method:r}}=e,a=i.bB[r]||i.bB.default;return"poe"===r?(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"wallpaper down-wallpaper-color divination-animation",children:[(0,n.jsx)(i.h4,{lng:t}),(0,n.jsx)(x,{lng:t})]})}):(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"wallpaper down-wallpaper-color divination-animation",children:[(0,n.jsx)(i.h4,{lng:t}),(0,n.jsx)(u,{lng:t,method:r,selectedStyle:a})]})})}},5431:function(e,t,r){"use strict";r.d(t,{m:function(){return l}});var n=r(7437),a=r(678);let s={introduction:{height:"h-[30rem]",hideHeight:"-bottom-72",moveHeight:"-translate-y-72",chatStyleClass:"h-[8rem]",expandChatClass:"h-[18rem] overflow-y-auto"},default:{height:"h-[32rem]",hideHeight:"-bottom-64",moveHeight:"-translate-y-64",chatStyleClass:"h-[8rem]",expandChatClass:"h-[20rem] overflow-y-auto"},explanation:{height:"h-[36rem]",hideHeight:"-bottom-96",moveHeight:"-translate-y-80",chatStyleClass:"h-[8rem]",expandChatClass:"h-[22rem] overflow-y-auto"},poe:{height:"h-[18rem]",hideHeight:"bottom-0",moveHeight:"",chatStyleClass:"h-[8rem] overflow-y-auto",expandChatClass:"h-[22rem] overflow-y-auto"}};function o(){return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"flex border h-16 w-16 divination-miri-style rounded-full",children:[(0,n.jsx)("img",{src:"/static/favicon.jpg",className:"rounded-full"}),(0,n.jsx)("p",{className:"pl-1 pt-12 font-bold",children:"Miri"})]})})}function l(e){let{message:t,buttons:r,hideEffect:l,isExpand:i,settings:c}=e,d=s[c]||s.default;return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"".concat(a.Tl," mx-auto ").concat(d.height," p-5 fixed inset-x-0 ").concat(d.hideHeight," z-[100] rounded-t-[20px] border divination-message-section ").concat(l&&i.current?d.moveHeight:""),children:[(0,n.jsx)(o,{}),(0,n.jsx)("div",{className:"mt-4 ".concat(l&&i.current?d.expandChatClass:d.chatStyleClass),children:t}),l&&i.current&&(0,n.jsx)("div",{className:"mt-4",children:(0,n.jsx)("div",{className:"flex justify-center",children:r})}),r&&!l&&(0,n.jsx)("div",{className:"fixed inset-x-0 bottom-5",children:(0,n.jsx)("div",{className:"flex justify-center",children:r})})]})})}},678:function(e,t,r){"use strict";r.d(t,{$f:function(){return i},F1:function(){return o},Jk:function(){return a},Tl:function(){return n},tq:function(){return l}});let n="max-w-screen-sm",a="https://miri-backend.vercel.app",s="MIRI",o="".concat(s,".").concat("client",".userDrawResult"),l="".concat(s,".").concat("sys",".spreadsData"),i={1:"▲",2:"▼",3:"⏹︎"}},425:function(e,t,r){"use strict";r.d(t,{$:function(){return u}});var n=r(1505),a=r(2265),s=r(2635),o=r(4457),l=r(5350),i=r(1520);let c=["en","tw"],d="translation",x="i18next";function u(e,t,r){let[n,l]=(0,o.fP)([x]),i=(0,s.$G)(t,r),{i18n:c}=i;{let[t,r]=(0,a.useState)(c.resolvedLanguage);(0,a.useEffect)(()=>{t!==c.resolvedLanguage&&r(c.resolvedLanguage)},[t,c.resolvedLanguage]),(0,a.useEffect)(()=>{e&&c.resolvedLanguage!==e&&c.changeLanguage(e)},[e,c]),(0,a.useEffect)(()=>{n.i18next!==e&&l(x,e,{path:"/"})},[e,n.i18next])}return i}n.ZP.use(s.Db).use(i.Z).use((0,l.Z)((e,t)=>r(8637)("./".concat(e,"/").concat(t,".json")))).init({...function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d;return{supportedLngs:c,fallbackLng:"en",lng:e,fallbackNS:d,defaultNS:d,ns:t}}(),lng:void 0,detection:{order:["path","htmlTag","cookie","navigator"]},preload:[]})},7907:function(e,t,r){"use strict";var n=r(5313);r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}}),r.o(n,"useSearchParams")&&r.d(t,{useSearchParams:function(){return n.useSearchParams}})}},function(e){e.O(0,[676,143,267,971,69,744],function(){return e(e.s=9390)}),_N_E=e.O()}]);