(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[683],{8637:function(e,t,r){var n={"./en/translation.json":[9272,649],"./tw/translation.json":[4589,589]};function a(e){if(!r.o(n,e))return Promise.resolve().then(function(){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t});var t=n[e],a=t[0];return r.e(t[1]).then(function(){return r.t(a,19)})}a.keys=function(){return Object.keys(n)},a.id=8637,e.exports=a},1914:function(e,t,r){Promise.resolve().then(r.bind(r,6271))},9797:function(e,t,r){"use strict";r.d(t,{he:function(){return l},r1:function(){return o},s0:function(){return s}});let n=(e,t)=>Math.floor(Math.random()*(t-e+1)+e),a=e=>({0:["0.875rem",8],1:["0.75rem",7],2:["0.625rem",6],3:["0.5rem",5],4:["0.375rem",4],5:["0.25rem",3],6:["0.125rem",2],7:["0px",1]})[e]||["1rem",10],s=e=>{let{count:t,isSpread:r}=e;return Array.from({length:t},(e,t)=>({position:"absolute",left:a(t)[0],top:"0px",zIndex:a(t)[1],...r&&{transform:"translate(".concat(n(100,200),"px, ").concat(n(100,200),"px) rotate(").concat(n(100,360),"deg)")},...r&&{zIndex:n(0,50)}}))},o=()=>{let e=[["16px",39],["14px",38],["12px",37],["10px",36],["8px",35],["6px",34],["4px",33],["2px",32],["0px",31]];return Array.from({length:9},(t,r)=>({position:"absolute",left:e[r][0],top:"0px",zIndex:e[r][1]}))},i=e=>({0:[-13,"12px"],1:[-11,"8px"],2:[-8,"8px"],3:[-6,"4px"],4:[-4,"0px"],5:[-3,"0px"],31:[13,"12px"],30:[11,"8px"],29:[8,"8px"],28:[6,"4px"],27:[4,"0px"],26:[3,"0px"]})[e]||[0,"0px"],c=e=>({0:[-13,"12px","0px"],1:[-13,"8px","2px"],2:[-13,"8px","2px"],3:[-11,"4px","4px"],4:[-11,"0px","4px"],5:[-11,"0px","6px"]})[e]||[-9,"0px","8px"],l=e=>{let{isSpread:t}=e;return Array.from({length:32},(e,r)=>({position:"absolute",left:c(r)[2],top:c(r)[1],transform:"rotate(".concat(c(r)[0],"deg)"),...t&&{top:i(r)[1],left:"0%"},...t&&{transform:"translateX(".concat(8*r,"px) rotate(").concat(i(r)[0],"deg)")},zIndex:r+1}))}},5951:function(e,t,r){"use strict";r.d(t,{Uv:function(){return u},bB:function(){return d},h2:function(){return l},h4:function(){return c},rQ:function(){return h}});var n=r(7437),a=r(8792),s=r(8024),o=r(7535),i=r(678);function c(e){let{lng:t}=e,r=()=>{localStorage.removeItem(i.F1)};return(0,n.jsx)("div",{className:"".concat(i.Tl," mx-auto h-14 border divination-navbar fixed inset-x-0 top-0"),children:(0,n.jsx)(a.default,{href:"/".concat(t,"/"),children:(0,n.jsx)("div",{className:"h-14 w-14",onClick:()=>r(),children:(0,n.jsx)("div",{className:"pl-4 pt-4",children:(0,n.jsx)(s.G,{icon:o.EyR,size:"xl",style:{color:"#e9d69d"}})})})})})}function l(){return(0,n.jsxs)("div",{className:"loadWrap",children:[(0,n.jsx)("div",{className:"loading first-squre"}),(0,n.jsx)("div",{className:"loading second-squre"}),(0,n.jsx)("div",{className:"loading third-squre"})]})}let d={runes:{overlayStyle:{borderRadius:"20px",background:"rgba(255, 255, 255)"},spreadsOverlayStyle:{background:"rgba(255, 255, 255)"},spreadsBorderColor:{borderColor:"rgba(255, 255, 255)"},spreadsWordColor:{color:"rgba(255, 255, 255)"},cardStyle:(0,n.jsx)(function(){return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{className:"h-[108px] w-16 rounded-[20px] grid place-items-center border-2 divination-rune-card pt-1",children:(0,n.jsx)("div",{className:"",children:(0,n.jsx)("img",{src:"/static/rune.svg",alt:"Rune card cover side"})})})})},{}),cardSvg:"/static/rune.svg"},default:{overlayStyle:{borderRadius:"5px",background:"rgba(234, 203, 132)"},spreadsOverlayStyle:{background:"rgba(234, 203, 132)"},spreadsBorderColor:{borderColor:"#EACB84"},spreadsWordColor:{color:"#F8D781"},cardStyle:(0,n.jsx)(function(){return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{className:"h-[108px] w-16 rounded-[5px] border-2 divination-card pt-1",children:(0,n.jsx)("div",{children:(0,n.jsx)("img",{src:"/static/tarot-card.svg",alt:"Tarot card cover side"})})})})},{}),cardSvg:"/static/tarot-card.svg"}};function u(e){let{func:t,title:r}=e;return(0,n.jsx)("button",{className:"border rounded-[10px] circle-button",onClick:t,children:(0,n.jsx)("div",{className:"border rounded-[10px] circle-inner-button",children:(0,n.jsx)("p",{className:"px-2",children:r})})})}let h=async e=>{try{let t=await fetch(i.Jk+"/api/v2/web/divination",{method:"POST",body:JSON.stringify(e)});if(!t.ok)throw Error("Network response was not ok");return await t.json()}catch(e){throw console.error("Error calling API:",e),e}}},6271:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return u}});var n=r(7437),a=r(2265),s=r(7907);r(8792);var o=r(425),i=r(5951),c=r(5431),l=r(9797);function d(e){let{lng:t,method:r,selectedStyle:d}=e,{t:u}=(0,o.$)(t),h=(0,s.useRouter)(),x=(0,s.useSearchParams)();x.get("spread");let p=x.get("num"),f=d.overlayStyle,m=d.cardStyle,[v,g]=(0,a.useState)(p),j=(0,n.jsxs)(a.Fragment,{children:[(0,n.jsxs)("p",{children:[u("divination.chooseCards.checkMessageYouHave")," ",p," ",u("divination.chooseCards.checkMessageSure")]}),(0,n.jsx)("div",{className:"grid justify-items-center pt-4",children:(0,n.jsx)(i.Uv,{func:()=>{["runes","tarot","lenormand"].includes(r),h.push("/".concat(t,"/").concat(r,"/prediction")+"?spread="+p)},title:u("divination.buttons.sure")})})]}),[b,y]=(0,a.useState)([]),N="".concat(u("divination.chooseCards.initMessageChoose")," ").concat(v," ").concat(u("divination.chooseCards.initMessageNum")),[C,S]=(0,a.useState)(N);(0,a.useEffect)(()=>{0!==v?S(N):S(j)},[v]);let w=e=>{b.length<p?b.includes(e)?(y(b.filter(t=>t!==e)),g(e=>e+1)):(y([...b,e]),g(e=>e-1)):b.includes(e)&&(y(b.filter(t=>t!==e)),g(e=>e+1))},k=e=>{R.current&&!R.current.contains(e.target)&&(F.current&&F.current.contains(e.target)||(y([]),g(p)))},[E,H]=(0,a.useState)(!1),R=(0,a.useRef)(null),F=(0,a.useRef)(null),L=(0,l.he)({isSpread:E}),M=()=>{H(!E)};return(0,a.useEffect)(()=>(M(),document.addEventListener("click",k),()=>{document.removeEventListener("click",k)}),[]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"pt-36 px-8",children:(0,n.jsx)("div",{ref:R,className:"relative",children:L.map((e,t)=>(0,n.jsxs)("div",{onClick:()=>w(t),className:"transition-transform delay-300 ease-linear duration-500 drop-shadow-lg will-change-transform",style:e,children:[b.includes(t)&&(0,n.jsx)("div",{className:"overlay",style:f}),m]},t))})}),(0,n.jsx)("div",{ref:F,children:(0,n.jsx)(c.m,{message:C,buttons:null,needMsgHideEffect:!1})})]})}function u(e){let{params:{lng:t,method:r}}=e,a=i.bB[r]||i.bB.default;return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"wallpaper down-wallpaper-color divination-animation",children:[(0,n.jsx)(i.h4,{lng:t}),(0,n.jsx)(d,{lng:t,method:r,selectedStyle:a})]})})}},5431:function(e,t,r){"use strict";r.d(t,{m:function(){return i}});var n=r(7437),a=r(678);let s={introduction:{height:"h-[30rem]",hideHeight:"-bottom-72",moveHeight:"-translate-y-72",chatStyleClass:"h-[8rem]",expandChatClass:"h-[18rem] overflow-y-auto"},default:{height:"h-[32rem]",hideHeight:"-bottom-64",moveHeight:"-translate-y-64",chatStyleClass:"h-[8rem]",expandChatClass:"h-[20rem] overflow-y-auto"},explanation:{height:"h-[36rem]",hideHeight:"-bottom-96",moveHeight:"-translate-y-80",chatStyleClass:"h-[8rem]",expandChatClass:"h-[22rem] overflow-y-auto"},poe:{height:"h-[18rem]",hideHeight:"bottom-0",moveHeight:"",chatStyleClass:"h-[8rem] overflow-y-auto",expandChatClass:"h-[22rem] overflow-y-auto"}};function o(){return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"flex border h-16 w-16 divination-miri-style rounded-full",children:[(0,n.jsx)("img",{src:"/static/favicon.jpg",className:"rounded-full"}),(0,n.jsx)("p",{className:"pl-1 pt-12 font-bold",children:"Miri"})]})})}function i(e){let{message:t,buttons:r,hideEffect:i,isExpand:c,settings:l}=e,d=s[l]||s.default;return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"".concat(a.Tl," mx-auto ").concat(d.height," p-5 fixed inset-x-0 ").concat(d.hideHeight," z-[100] rounded-t-[20px] border divination-message-section ").concat(i&&c.current?d.moveHeight:""),children:[(0,n.jsx)(o,{}),(0,n.jsx)("div",{className:"mt-4 ".concat(i&&c.current?d.expandChatClass:d.chatStyleClass),children:t}),i&&c.current&&(0,n.jsx)("div",{className:"mt-4",children:(0,n.jsx)("div",{className:"flex justify-center",children:r})}),r&&!i&&(0,n.jsx)("div",{className:"fixed inset-x-0 bottom-5",children:(0,n.jsx)("div",{className:"flex justify-center",children:r})})]})})}},678:function(e,t,r){"use strict";r.d(t,{$f:function(){return c},F1:function(){return o},Jk:function(){return a},Tl:function(){return n},tq:function(){return i}});let n="max-w-screen-sm",a="https://miri-backend.vercel.app",s="MIRI",o="".concat(s,".").concat("client",".userDrawResult"),i="".concat(s,".").concat("sys",".spreadsData"),c={1:"▲",2:"▼",3:"⏹︎"}},425:function(e,t,r){"use strict";r.d(t,{$:function(){return h}});var n=r(1505),a=r(2265),s=r(2635),o=r(4457),i=r(5350),c=r(1520);let l=["en","tw"],d="translation",u="i18next";function h(e,t,r){let[n,i]=(0,o.fP)([u]),c=(0,s.$G)(t,r),{i18n:l}=c;{let[t,r]=(0,a.useState)(l.resolvedLanguage);(0,a.useEffect)(()=>{t!==l.resolvedLanguage&&r(l.resolvedLanguage)},[t,l.resolvedLanguage]),(0,a.useEffect)(()=>{e&&l.resolvedLanguage!==e&&l.changeLanguage(e)},[e,l]),(0,a.useEffect)(()=>{n.i18next!==e&&i(u,e,{path:"/"})},[e,n.i18next])}return c}n.ZP.use(s.Db).use(c.Z).use((0,i.Z)((e,t)=>r(8637)("./".concat(e,"/").concat(t,".json")))).init({...function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d;return{supportedLngs:l,fallbackLng:"en",lng:e,fallbackNS:d,defaultNS:d,ns:t}}(),lng:void 0,detection:{order:["path","htmlTag","cookie","navigator"]},preload:[]})},7907:function(e,t,r){"use strict";var n=r(5313);r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}}),r.o(n,"useSearchParams")&&r.d(t,{useSearchParams:function(){return n.useSearchParams}})}},function(e){e.O(0,[676,143,267,971,69,744],function(){return e(e.s=1914)}),_N_E=e.O()}]);