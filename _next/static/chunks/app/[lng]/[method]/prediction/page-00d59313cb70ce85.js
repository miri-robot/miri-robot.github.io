(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[529],{8637:function(e,t,n){var r={"./en/translation.json":[9272,649],"./tw/translation.json":[4589,589]};function s(e){if(!n.o(r,e))return Promise.resolve().then(function(){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t});var t=r[e],s=t[0];return n.e(t[1]).then(function(){return n.t(s,19)})}s.keys=function(){return Object.keys(r)},s.id=8637,e.exports=s},5377:function(e,t,n){Promise.resolve().then(n.bind(n,85))},5951:function(e,t,n){"use strict";n.d(t,{FN:function(){return g},Uv:function(){return u},_P:function(){return x},bB:function(){return l},h2:function(){return o},h4:function(){return d},p3:function(){return j},rQ:function(){return m}});var r=n(7437),s=n(8792),a=n(8024),c=n(7535),i=n(678);function d(e){let{lng:t}=e,n=()=>{localStorage.removeItem(i.F1)};return(0,r.jsx)("div",{className:"".concat(i.Tl," mx-auto h-14 border divination-navbar fixed inset-x-0 top-0"),children:(0,r.jsx)(s.default,{href:"/".concat(t,"/"),children:(0,r.jsx)("div",{className:"h-14 w-14",onClick:()=>n(),children:(0,r.jsx)("div",{className:"pl-4 pt-4",children:(0,r.jsx)(a.G,{icon:c.EyR,size:"xl",style:{color:"#e9d69d"}})})})})})}function o(){return(0,r.jsxs)("div",{className:"loadWrap",children:[(0,r.jsx)("div",{className:"loading first-squre"}),(0,r.jsx)("div",{className:"loading second-squre"}),(0,r.jsx)("div",{className:"loading third-squre"})]})}let l={runes:{overlayStyle:{borderRadius:"20px",background:"rgba(255, 255, 255)"},spreadsOverlayStyle:{background:"rgba(255, 255, 255)"},spreadsBorderColor:{borderColor:"rgba(255, 255, 255)"},spreadsWordColor:{color:"rgba(255, 255, 255)"},cardStyle:(0,r.jsx)(function(){return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{className:"h-[108px] w-16 rounded-[20px] grid place-items-center border-2 divination-rune-card pt-1",children:(0,r.jsx)("div",{className:"",children:(0,r.jsx)("img",{src:"/static/rune.svg",alt:"Rune card cover side"})})})})},{}),cardSvg:"/static/rune.svg"},default:{overlayStyle:{borderRadius:"5px",background:"rgba(234, 203, 132)"},spreadsOverlayStyle:{background:"rgba(234, 203, 132)"},spreadsBorderColor:{borderColor:"#EACB84"},spreadsWordColor:{color:"#F8D781"},cardStyle:(0,r.jsx)(function(){return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{className:"h-[108px] w-16 rounded-[5px] border-2 divination-card pt-1",children:(0,r.jsx)("div",{children:(0,r.jsx)("img",{src:"/static/tarot-card.svg",alt:"Tarot card cover side"})})})})},{}),cardSvg:"/static/tarot-card.svg"}};function u(e){let{func:t,title:n}=e;return(0,r.jsx)("button",{className:"border rounded-[10px] circle-button hover:-translate-x-0.5 hover:translate-y-0.5 cursor-pointer",onClick:t,children:(0,r.jsx)("div",{className:"border rounded-[10px] circle-inner-button",children:(0,r.jsx)("p",{className:"px-2",children:n})})})}let m=async e=>{try{let t=await fetch(i.Jk+"/api/v2/web/divination",{method:"POST",body:JSON.stringify(e)});if(!t.ok)throw Error("Network response was not ok");return await t.json()}catch(e){throw console.error("Error calling API:",e),e}},h={runes:[["1","1"],["2","3"]],tarot:[["1","1"],["2","3"],["3","5"]],lenormand:[["1","1"],["2","2"]],default:["1","2"]};function x(e){let{errorMessage:t}=e;return(0,r.jsx)("div",{className:"w-full bg-red-500 rounded-lg alarm-div mb-3",children:(0,r.jsx)("div",{className:"text-white text-center font-bold text-lg py-3 px-2",children:t})})}let p={runes:["1","3"],tarot:["1","3","5"],lenormand:["1","2"],whispers:["1","2"],wisdom:["1","2"]},g=(e,t,n,r,s)=>{if(t.has("spread")){let a=t.get("spread");p[e].includes(a)?n(!1):(r.current=s("divination.alarm.invalidParams"),n(!0))}else r.current=s("divination.alarm.lackParams"),n(!0)},j=(e,t,n,r,s)=>{if(["runes","tarot","lenormand"].includes(e)){if(t.has("spread")&&t.has("num")){let a=[t.get("spread"),t.get("num")],c=!1;for(let t of h[e])if(t.every((e,t)=>e===a[t])){c=!0;break}c?n(!1):(r.current=s("divination.alarm.invalidParams"),n(!0))}else r.current=s("divination.alarm.lackParams"),n(!0)}else if(t.has("num")){let e=t.get("num");h.default.includes(e)?n(!1):(r.current=s("divination.alarm.invalidParams"),n(!0))}else r.current=s("divination.alarm.lackParams"),n(!0)}},5431:function(e,t,n){"use strict";n.d(t,{m:function(){return i}});var r=n(7437),s=n(678);let a={introduction:{height:"h-[30rem]",hideHeight:"-bottom-72",moveHeight:"-translate-y-72",chatStyleClass:"h-[8rem]",expandChatClass:"h-[18rem] overflow-y-auto"},default:{height:"h-[32rem]",hideHeight:"-bottom-64",moveHeight:"-translate-y-64",chatStyleClass:"h-[8rem]",expandChatClass:"h-[20rem] overflow-y-auto"},explanation:{height:"h-[36rem]",hideHeight:"-bottom-96",moveHeight:"-translate-y-80",chatStyleClass:"h-[8rem]",expandChatClass:"h-[22rem] overflow-y-auto"},poe:{height:"h-[18rem]",hideHeight:"bottom-0",moveHeight:"",chatStyleClass:"h-[8rem] overflow-y-auto",expandChatClass:"h-[22rem] overflow-y-auto"}};function c(){return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"flex border h-16 w-16 divination-miri-style rounded-full",children:[(0,r.jsx)("img",{src:"/static/favicon.jpg",className:"rounded-full"}),(0,r.jsx)("p",{className:"pl-1 pt-12 font-bold",children:"Miri"})]})})}function i(e){let{message:t,buttons:n,hideEffect:i,isExpand:d,settings:o}=e,l=a[o]||a.default;return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"".concat(s.Tl," mx-auto ").concat(l.height," p-5 fixed inset-x-0 ").concat(l.hideHeight," z-[100] rounded-t-[20px] border divination-message-section ").concat(i&&d.current?l.moveHeight:""),children:[(0,r.jsx)(c,{}),(0,r.jsx)("div",{className:"mt-4 ".concat(i&&d.current?l.expandChatClass:l.chatStyleClass),children:t}),i&&d.current&&(0,r.jsx)("div",{className:"mt-4",children:(0,r.jsx)("div",{className:"flex justify-center",children:n})}),n&&!i&&(0,r.jsx)("div",{className:"fixed inset-x-0 bottom-5",children:(0,r.jsx)("div",{className:"flex justify-center",children:n})})]})})}},85:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return G}});var r=n(7437),s=n(2265),a=n(7907),c=n(425),i=n(678),d=n(5951),o=n(5431),l=n(8024),u=n(7535);function m(e){let{message:t,method:n}=e;switch(n){default:return(0,r.jsx)(r.Fragment,{children:t.description.map((e,n)=>(0,r.jsx)("h3",{children:e},"".concat(t.id,"-").concat(n)))});case"runes":return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h3",{children:t.meaning[0]},"rune-meaning-".concat(t.id,"-1")),(0,r.jsx)("h3",{children:t.meaning[1]},"rune-meaning-".concat(t.id,"-2")),t.description.map((e,n)=>(0,r.jsxs)(s.Fragment,{children:[(0,r.jsx)("h3",{className:"text-base font-bold text-center text-gray-300 my-2",children:e.title},"rune-title-".concat(t.id,"-").concat(n)),(0,r.jsx)("h3",{className:"pb-2",children:e.item},"rune-item-".concat(t.id,"-").concat(n))]},"rune-description-".concat(t.id,"-").concat(n)))]});case"tarot":return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h3",{children:t.meaning[0]},"tarot-meaning-".concat(t.id,"-1")),t.description.map((e,n)=>e.item&&(0,r.jsxs)(s.Fragment,{children:[(0,r.jsx)("h3",{className:"text-base font-bold text-center text-gray-300 my-2",children:e.title},"tarot-title-".concat(t.id,"-").concat(n)),(0,r.jsx)("h3",{className:"pb-2",children:e.item},"tarot-item-".concat(t.id,"-").concat(n))]},"tarot-description-".concat(t.id,"-").concat(n)))]});case"lenormand":return(0,r.jsx)(r.Fragment,{children:t.description.map((e,n)=>(0,r.jsxs)(s.Fragment,{children:[(0,r.jsx)("h3",{className:"text-base font-bold text-center text-gray-300 my-2",children:e.title},"lenormand-title-".concat(t.id,"-").concat(n)),(0,r.jsx)("h3",{className:"pb-2",children:e.item},"lenormand-item-".concat(t.id,"-").concat(n))]},"lenormand-description-".concat(t.id,"-").concat(n)))})}}function h(e){let{message:t,photo:n,method:a,closeFunc:c}=e,[i,d]=(0,s.useState)(!0);return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"absolute h-[38rem] w-[22rem] z-30 border-2 divination-single-card-section rounded-[20px] centered-div",onClick:e=>{e.stopPropagation()},children:[(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("div",{className:"flex justify-start grow",children:(0,r.jsxs)("div",{className:"".concat(i&&"hidden"," golden-word text-lg pt-2 pb-1 pl-6"),children:[t.position,t.title]})}),(0,r.jsx)("div",{className:"flex justify-end",children:(0,r.jsx)("div",{className:"pt-2 pl-3 pr-4 pb-1 cursor-pointer",onClick:c,children:(0,r.jsx)(l.G,{icon:u.g82,size:"xl",style:{color:"#f8d781"}})})})]}),(0,r.jsx)("div",{className:"px-8 pt-1",children:(0,r.jsxs)("div",{className:"overflow-y-auto",onScroll:e=>{e.target.scrollTop>330?d(!1):d(!0)},children:[(0,r.jsx)("div",{className:"px-14 pb-4",children:n}),(0,r.jsxs)("p",{className:"golden-word text-lg mb-1",children:[t.position,t.title]}),(0,r.jsx)("div",{className:"h-48 whitespace-pre-line",children:(0,r.jsx)(m,{message:t,method:a})})]})})]})})}let x="/static/tarot-card.svg";function p(e){let{card:t}=e;return"2"===t.code?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"grid place-content-center mb-2",children:(0,r.jsx)("div",{className:"h-28 w-[5rem] grid place-items-center rounded-[20px] shadow-sm divination-rune-result-card drop-shadow-md",children:(0,r.jsx)("p",{className:"pb-2 text-4xl rotate-180",children:t.photo})})}),(0,r.jsxs)("p",{className:"text-center font-bold golden-word break-keep text-sm",children:[i.$f[t.code]," ",t.title]})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"grid place-content-center mb-2",children:(0,r.jsx)("div",{className:"h-28 w-[5rem] grid place-items-center rounded-[20px] shadow-sm divination-rune-result-card drop-shadow-md",children:(0,r.jsx)("p",{className:"pb-2 text-4xl",children:t.photo})})}),(0,r.jsxs)("p",{className:"text-center font-bold golden-word break-keep text-sm",children:[i.$f[t.code]," ",t.title]})]})}function g(e){let{card:t}=e;return"2"===t.code?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"grid place-content-center mb-2",children:(0,r.jsx)("div",{className:"h-24 w-[4.5rem] grid place-items-center rounded-[20px] shadow-sm divination-rune-result-card drop-shadow-md",children:(0,r.jsx)("p",{className:"pb-2 text-4xl rotate-180",children:t.photo})})}),(0,r.jsxs)("p",{className:"text-center font-bold golden-word break-keep text-sm",children:[i.$f[t.code]," ",t.title]})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"grid place-content-center mb-2",children:(0,r.jsx)("div",{className:"h-24 w-[4.5rem] grid place-items-center rounded-[20px] shadow-sm divination-rune-result-card drop-shadow-md",children:(0,r.jsx)("p",{className:"pb-2 text-4xl",children:t.photo})})}),(0,r.jsxs)("p",{className:"text-center font-bold golden-word break-keep text-sm",children:[i.$f[t.code]," ",t.title]})]})}function j(e){let{card:t}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"grid place-content-center mb-2",children:(0,r.jsx)("div",{className:"h-28 w-[5rem] rounded-[5px] border-2 divination-card grid place-items-center drop-shadow-md",children:(0,r.jsx)("div",{children:(0,r.jsx)("img",{src:x,alt:"Tarot card SVG",className:"h-[6.5rem] w-[5rem] pt-1"})})})}),(0,r.jsxs)("p",{className:"text-center font-bold golden-word break-keep text-sm",children:[t.positionId&&i.$f[t.positionId]," ",t.title]})]})}function f(e){let{card:t}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"grid place-content-center mb-2",children:(0,r.jsx)("div",{className:"h-28 w-[5rem] rounded-[5px] border-2 divination-card grid place-items-center drop-shadow-md",children:(0,r.jsx)("div",{children:(0,r.jsx)("img",{src:x,alt:"Tarot card SVG",className:"h-[6.5rem] w-[5rem] pt-1"})})})}),(0,r.jsxs)("p",{className:"text-center font-bold golden-word break-keep text-sm",children:[t.positionId&&i.$f[t.positionId]," ",t.title]})]})}function v(e){let{card:t}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"grid place-content-center mb-2",children:(0,r.jsx)("div",{className:"h-24 w-[4.5rem] rounded-[5px] border-2 divination-card grid place-items-center drop-shadow-md",children:(0,r.jsx)("div",{children:(0,r.jsx)("img",{src:x,alt:"Tarot card SVG",className:"h-[5.5rem] w-[4.5rem] pt-1"})})})}),(0,r.jsxs)("p",{className:"text-center font-bold golden-word break-keep text-sm",children:[t.positionId&&i.$f[t.positionId]," ",t.title]})]})}function b(e){let{method:t,size:n,card:s}=e;return"runes"===t?1===n?(0,r.jsx)(p,{card:s}):(0,r.jsx)(g,{card:s}):1===n?(0,r.jsx)(j,{card:s}):2===n?(0,r.jsx)(f,{card:s}):(0,r.jsx)(v,{card:s})}function N(e){let{lng:t}=e,{t:n}=(0,c.$)(t),s=n("divination.prediction.initMessage");return(0,r.jsx)(r.Fragment,{children:s})}function w(e){let{singleCard:t}=e;return"2"===t.code?(0,r.jsx)("div",{className:"h-72 w-[12rem] grid place-items-center rounded-[50px] divination-rune-result-card bg-contain bg-center drop-shadow-lg",children:(0,r.jsx)("p",{className:"text-8xl font-bold rotate-180",children:t.photo})}):(0,r.jsx)("div",{className:"h-72 w-[12rem] grid place-items-center rounded-[50px] divination-rune-result-card bg-contain bg-center drop-shadow-lg",children:(0,r.jsx)("p",{className:"text-8xl font-bold",children:t.photo})})}function y(e){let{positionId:t,cardId:n}=e;return(0,r.jsx)("div",{className:"h-72 w-[12rem] rounded-[5px] border-2 divination-card bg-contain bg-center",style:{backgroundImage:"url(".concat("/static/cards/tarot","/").concat(n,".jpg)"),backgroundSize:"cover",backgroundRepeat:"no-repeat",width:"100%",transform:"2"===t?"rotate(180deg)":"none"}})}function k(e){let{lng:t,cardId:n}=e,{t:s}=(0,c.$)(t);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"h-64 w-[12rem] rounded-[5px] border-2 divination-card",style:{backgroundImage:'url("'.concat("/static/cards/ai/lenormand.jpg",'")'),backgroundSize:"cover",backgroundRepeat:"no-repeat",width:"100%"}}),(0,r.jsx)("p",{className:"text-xs text-center italic mt-1",children:s("divination.prediction.copyright")})]})}function S(e){let{lng:t,cardId:n}=e,{t:s}=(0,c.$)(t);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"h-64 w-[12rem] rounded-[5px] border-2 divination-card",style:{backgroundImage:'url("'.concat("/static/cards/ai/whispers.jpg",'")'),backgroundSize:"cover",backgroundRepeat:"no-repeat",width:"100%"}}),(0,r.jsx)("p",{className:"text-xs text-center italic mt-1",children:s("divination.prediction.copyright")})]})}function F(e){let{lng:t,cardId:n}=e,{t:s}=(0,c.$)(t);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"h-64 w-[12rem] rounded-[5px] border-2 divination-card",style:{backgroundImage:'url("'.concat("/static/cards/ai/wisdom.jpg",'")'),backgroundSize:"cover",backgroundRepeat:"no-repeat",width:"100%"}}),(0,r.jsx)("p",{className:"text-xs text-center italic mt-1",children:s("divination.prediction.copyright")})]})}function C(e){let{lng:t,method:n,singleCard:s}=e;switch(n){case"runes":return(0,r.jsx)(w,{singleCard:s});case"tarot":return(0,r.jsx)(y,{positionId:s.positionId,cardId:s.cardId});case"lenormand":return(0,r.jsx)(k,{lng:t});case"whispers":return(0,r.jsx)(S,{lng:t});case"wisdom":return(0,r.jsx)(F,{lng:t})}}function R(e){let{lng:t,method:n,spreadType:a}=e,c=(0,r.jsx)(N,{lng:t}),[l,u]=(0,s.useState)(null),[m,x]=(0,s.useState)(c),[p,g]=(0,s.useState)({}),j=(0,s.useRef)(null),[f,v]=(0,s.useState)(null),[w,y]=(0,s.useState)(!0),k={lang:t,method:n,action:"prediction",counts:parseInt(a,10)};(0,s.useEffect)(()=>{(async()=>{try{let e=JSON.parse(localStorage.getItem(i.F1))||{};if(e.drawResult)v(e.drawResult),y(!1);else{let t=await (0,d.rQ)(k);e.drawMethod=n,e.drawResult=t,localStorage.setItem(i.F1,JSON.stringify(e)),v(t),y(!1)}}catch(e){console.error("Error fetching or storing data:",e)}})()},[]);let S=e=>{null==l?(u(!0),g(f.cards.find(t=>t.id===e)),x(e)):(u(null),x(c))},F=e=>{j.current&&!j.current.contains(e.target)&&(u(null),x(c))};(0,s.useEffect)(()=>(document.addEventListener("click",F),()=>{document.removeEventListener("click",F)}),[]);let R=l?"blur-sm":"";return(0,r.jsxs)(r.Fragment,{children:[w?(0,r.jsx)(d.h2,{}):(0,r.jsxs)("div",{children:[l&&(0,r.jsx)(h,{message:p,photo:(0,r.jsx)(C,{lng:t,method:n,singleCard:p}),method:n,closeFunc:()=>S(p.id)}),(0,r.jsx)("div",{className:"pt-28 px-8 ".concat(R),children:(0,r.jsx)("div",{ref:j,className:"relative h-[26rem] p-2 grid rounded-[20px] border divination-result-section place-content-center",children:f.cards.map(e=>(0,r.jsx)("div",{onClick:()=>S(e.id),children:(0,r.jsx)(b,{method:n,size:1,card:e})},"div".concat(e.id)))})})]}),(0,r.jsx)("div",{className:"fixed inset-x-0 bottom-0 ".concat(R),children:(0,r.jsx)(o.m,{message:m,buttons:null,hideEffect:!1,settings:"explanation"})})]})}function E(e){let{lng:t,method:n,spreadType:a}=e,c=(0,r.jsx)(N,{lng:t}),[l,u]=(0,s.useState)(null),[m,x]=(0,s.useState)(c),[p,g]=(0,s.useState)({}),j=(0,s.useRef)(null),[f,v]=(0,s.useState)([]),[w,y]=(0,s.useState)(!0),k={lang:t,method:n,action:"prediction",counts:parseInt(a,10)};(0,s.useEffect)(()=>{(async()=>{try{let e=JSON.parse(localStorage.getItem(i.F1))||{};if(e.drawResult)v(e.drawResult),y(!1);else{let t=await (0,d.rQ)(k);e.drawMethod=n,e.drawResult=t,localStorage.setItem(i.F1,JSON.stringify(e)),v(t),y(!1)}}catch(e){console.error(e)}})()},[]);let S=e=>{null==l?(u(!0),g(f.cards.find(t=>t.id===e)),x(e)):(u(null),x(c))},F=e=>{j.current&&!j.current.contains(e.target)&&(u(null),x(c))};(0,s.useEffect)(()=>(document.addEventListener("click",F),()=>{document.removeEventListener("click",F)}),[]);let R=l?"blur-sm":"";return(0,r.jsxs)(r.Fragment,{children:[w?(0,r.jsx)(d.h2,{}):(0,r.jsxs)("div",{children:[l&&(0,r.jsx)(h,{message:p,photo:(0,r.jsx)(C,{lng:t,method:n,singleCard:p}),method:n,closeFunc:()=>S(p.id)}),(0,r.jsx)("div",{className:"pt-28 px-8 ".concat(R),children:(0,r.jsx)("div",{ref:j,className:"relative h-[26rem] p-2 grid justify-items-center rounded-[20px] border divination-result-section place-content-center",children:(0,r.jsx)("div",{className:"flex gap-6",children:f.cards.map(e=>(0,r.jsx)("div",{onClick:()=>S(e.id),children:(0,r.jsx)(b,{method:n,size:2,card:e})},"div".concat(e.id)))})})})]}),(0,r.jsx)("div",{className:"fixed inset-x-0 bottom-0 ".concat(R),children:(0,r.jsx)(o.m,{message:m,buttons:null,hideEffect:!1,settings:"explanation"})})]})}function I(e){let{lng:t,method:n,spreadType:a}=e,c=(0,r.jsx)(N,{lng:t}),[l,u]=(0,s.useState)(null),[m,x]=(0,s.useState)(c),[p,g]=(0,s.useState)({}),j=(0,s.useRef)(null),[f,v]=(0,s.useState)(null),[w,y]=(0,s.useState)(!0),k={lang:t,method:n,action:"prediction",counts:parseInt(a,10)};(0,s.useEffect)(()=>{(async()=>{try{let e=JSON.parse(localStorage.getItem(i.F1))||{};if(e.drawResult)v(e.drawResult),y(!1);else{let t=await (0,d.rQ)(k);e.drawMethod=n,e.drawResult=t,localStorage.setItem(i.F1,JSON.stringify(e)),v(t),y(!1)}}catch(e){console.error(e)}})()},[]);let S=e=>{null==l?(u(!0),g(f.cards.find(t=>t.id===e)),x(e)):(u(null),x(c))},F=e=>{j.current&&!j.current.contains(e.target)&&(u(null),x(c))};(0,s.useEffect)(()=>(document.addEventListener("click",F),()=>{document.removeEventListener("click",F)}),[]);let R=l?"blur-sm":"";return(0,r.jsxs)(r.Fragment,{children:[w?(0,r.jsx)(d.h2,{}):(0,r.jsxs)("div",{children:[l&&(0,r.jsx)(h,{message:p,photo:(0,r.jsx)(C,{lng:t,method:n,singleCard:p}),method:n,closeFunc:()=>S(p.id)}),(0,r.jsx)("div",{className:"pt-28 px-8 ".concat(R),children:(0,r.jsx)("div",{ref:j,className:"relative h-[26rem] p-2 grid grid-cols-3 rounded-[20px] border divination-result-section place-content-center",children:f.cards.map(e=>(0,r.jsx)("div",{onClick:()=>S(e.id),children:(0,r.jsx)(b,{method:n,size:3,card:e})},"div".concat(e.id)))})})]}),(0,r.jsx)("div",{className:"fixed inset-x-0 bottom-0 ".concat(R),children:(0,r.jsx)(o.m,{message:m,buttons:null,hideEffect:!1,settings:"explanation"})})]})}function P(e){let{lng:t,method:n,spreadType:a}=e,c=(0,r.jsx)(N,{lng:t}),[l,u]=(0,s.useState)(null),[m,x]=(0,s.useState)(c),[p,g]=(0,s.useState)({}),j=(0,s.useRef)(null),[f,v]=(0,s.useState)(null),[w,y]=(0,s.useState)(!0),k={lang:t,method:n,action:"prediction",counts:parseInt(a,10)};(0,s.useEffect)(()=>{(async()=>{try{let e=JSON.parse(localStorage.getItem(i.F1))||{};if(e.drawResult)v(e.drawResult),y(!1);else{let t=await (0,d.rQ)(k);e.drawMethod=n,e.drawResult=t,localStorage.setItem(i.F1,JSON.stringify(e)),v(t),y(!1)}}catch(e){console.error(e)}})()},[]);let S=e=>{null==l?(u(!0),g(f.cards.find(t=>t.id===e)),x(e)):(u(null),x(c))},F=e=>{j.current&&!j.current.contains(e.target)&&(u(null),x(c))};(0,s.useEffect)(()=>(document.addEventListener("click",F),()=>{document.removeEventListener("click",F)}),[]);let R=l?"blur-sm":"";return(0,r.jsxs)(r.Fragment,{children:[w?(0,r.jsx)(d.h2,{}):(0,r.jsxs)("div",{children:[l&&(0,r.jsx)(h,{message:p,photo:(0,r.jsx)(C,{lng:t,method:n,singleCard:p}),method:n,closeFunc:()=>S(p.id)}),(0,r.jsx)("div",{className:"pt-28 px-8 ".concat(R),children:(0,r.jsxs)("div",{ref:j,className:"relative h-[26rem] p-2 grid grid-rows-3 grid-cols-3 rounded-[20px] border divination-result-section place-content-center",children:[(0,r.jsx)("div",{}),(0,r.jsx)("div",{onClick:()=>S(f.cards[0].id),children:(0,r.jsx)(b,{method:n,size:3,card:f.cards[0]})},"div".concat(f.cards[0].id)),(0,r.jsx)("div",{}),(0,r.jsx)("div",{onClick:()=>S(f.cards[1].id),children:(0,r.jsx)(b,{method:n,size:3,card:f.cards[1]})},"div".concat(f.cards[1].id)),(0,r.jsx)("div",{onClick:()=>S(f.cards[2].id),children:(0,r.jsx)(b,{method:n,size:3,card:f.cards[2]})},"div".concat(f.cards[2].id)),(0,r.jsx)("div",{onClick:()=>S(f.cards[3].id),children:(0,r.jsx)(b,{method:n,size:3,card:f.cards[3]})},"div".concat(f.cards[3].id)),(0,r.jsx)("div",{}),(0,r.jsx)("div",{onClick:()=>S(f.cards[4].id),children:(0,r.jsx)(b,{method:n,size:3,card:f.cards[4]})},"div".concat(f.cards[4].id)),(0,r.jsx)("div",{})]})})]}),(0,r.jsx)("div",{className:"fixed inset-x-0 bottom-0 ".concat(R),children:(0,r.jsx)(o.m,{message:m,buttons:null,hideEffect:!1,settings:"explanation"})})]})}function O(e){let{}=e;return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("img",{className:"h-32",src:"/static/poe-up.png",alt:"poe up side"})})}function L(){return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("img",{className:"h-32",src:"/static/poe-cover.png",alt:"poe cover side"})})}function M(e){let{leftRotation:t,rightRotation:n}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{style:{transform:"rotate(".concat(t,"deg)")},children:(0,r.jsx)(O,{})},"moon-block-happycup1-up"),(0,r.jsx)("div",{style:{transform:"rotate(".concat(n,"deg)")},children:(0,r.jsx)(L,{})},"moon-block-happycup1-cover")]})}function z(e){let{leftRotation:t,rightRotation:n}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{style:{transform:"rotate(".concat(t,"deg)")},children:(0,r.jsx)(L,{})},"moon-block-happycup4-cover"),(0,r.jsx)("div",{style:{transform:"rotate(".concat(n,"deg)")},children:(0,r.jsx)(O,{})},"moon-block-happycup4-up")]})}function T(e){let{leftRotation:t,rightRotation:n}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{style:{transform:"rotate(".concat(t,"deg)")},children:(0,r.jsx)(O,{})},"moon-block-laughcup-1"),(0,r.jsx)("div",{style:{transform:"rotate(".concat(n,"deg)")},children:(0,r.jsx)(O,{})},"moon-block-laughcup-2")]})}function $(e){let{leftRotation:t,rightRotation:n}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{style:{transform:"rotate(".concat(t,"deg)")},children:(0,r.jsx)(L,{})},"moon-block-angrycup-1"),(0,r.jsx)("div",{style:{transform:"rotate(".concat(n,"deg)")},children:(0,r.jsx)(L,{})},"moon-block-angrycup-2")]})}function J(e){let{code:t}=e,[n,a]=(0,s.useState)(0),[c,i]=(0,s.useState)(0);switch((0,s.useEffect)(()=>{a(Math.round(360*Math.random())),i(Math.round(360*Math.random()))},[]),t){case"1":return(0,r.jsx)(M,{leftRotation:n,rightRotation:c});case"2":return(0,r.jsx)(T,{leftRotation:n,rightRotation:c});case"3":return(0,r.jsx)($,{leftRotation:n,rightRotation:c});case"4":return(0,r.jsx)(z,{leftRotation:n,rightRotation:c})}}function H(e){let{message:t}=e;return(0,r.jsx)(r.Fragment,{children:t.data.meaning?(0,r.jsx)(r.Fragment,{children:t.data.meaning.map((e,t)=>(0,r.jsx)("p",{children:e},"meaning-".concat(t)))}):(0,r.jsx)("p",{children:t.data.description})})}let _=e=>{let{setResult:t,setIsLoading:n,lng:r,method:s,cardCounts:a}=e,c={lang:r,method:s,action:"prediction",counts:a};n(!0),(async()=>{try{let e=await (0,d.rQ)(c);t(e),n(!1)}catch(e){console.error(e)}})()};function B(e){let{lng:t,method:n,cardCounts:a}=e,{t:i}=(0,c.$)(t),[l,u]=(0,s.useState)([]),[m,h]=(0,s.useState)(!0);(0,s.useEffect)(()=>{_({setResult:u,setIsLoading:h,lng:t,method:n,cardCounts:a})},[]);let x=(0,r.jsx)(r.Fragment,{children:m?(0,r.jsx)(d.h2,{}):(0,r.jsxs)(s.Fragment,{children:[(0,r.jsxs)("div",{className:"flex gap-1",children:[(0,r.jsx)("p",{children:i("divination.prediction.MessageMoonBlock")}),(0,r.jsx)("p",{className:"font-bold",children:l.data.title})]}),(0,r.jsx)(H,{message:l})]})}),p=(0,r.jsx)(r.Fragment,{children:m?(0,r.jsx)(r.Fragment,{}):(0,r.jsx)(s.Fragment,{children:(0,r.jsx)("div",{className:"flex justify-center",children:(0,r.jsx)(d.Uv,{func:()=>_({setResult:u,setIsLoading:h,lng:t,method:n,cardCounts:a}),title:i("divination.buttons.again")})})})});return(0,r.jsx)(r.Fragment,{children:m?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.h2,{}),(0,r.jsx)(o.m,{message:"",buttons:null,settings:"poe"})]}):(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"pt-28 px-8",children:(0,r.jsx)("div",{className:"border-2 moon-block-cloth p-4",children:(0,r.jsx)("div",{className:"h-48 md:h-56 grid grid-cols-2 border-2 moon-block-inner-cloth p-2 gap-8",children:(0,r.jsx)(J,{code:l.data.code})})})}),(0,r.jsx)(o.m,{message:x,buttons:p,settings:"poe"})]})})}function Q(e){let{lng:t,method:n,selectedStyle:c}=e,d=(0,a.useSearchParams)().get("spread");switch((0,s.useEffect)(()=>{let e=JSON.parse(localStorage.getItem(i.F1))||{};e.drawMethod&&e.drawMethod!==n&&localStorage.removeItem(i.F1)},[]),d){case"1":return(0,r.jsx)(R,{lng:t,method:n,spreadType:d});case"2":return(0,r.jsx)(E,{lng:t,method:n,spreadType:d});case"3":if(["runes","tarot"].includes(n))return(0,r.jsx)(I,{lng:t,method:n,spreadType:d});case"5":if("tarot"===n)return(0,r.jsx)(P,{lng:t,method:n,spreadType:d})}}function D(e){let{lng:t,method:n,selectedStyle:i}=e,{t:o}=(0,c.$)(t),l=(0,a.useRouter)(),u=(0,a.useSearchParams)(),[m,h]=(0,s.useState)(null),x=(0,s.useRef)("");return(0,s.useEffect)(()=>{(0,d.FN)(n,u,h,x,o),x.current&&setTimeout(()=>{l.push("/".concat(t,"/").concat(n,"/introduction"))},5e3)},[]),(0,r.jsxs)("div",{className:"wallpaper down-wallpaper-color divination-animation",children:[(0,r.jsx)(d.h4,{lng:t}),m&&(0,r.jsx)("div",{className:"pt-24 px-8 relative",children:(0,r.jsx)(d._P,{errorMessage:x.current})}),!m&&(0,r.jsx)(Q,{lng:t,method:n,selectedStyle:i})]})}function G(e){let{params:{lng:t,method:n}}=e,s=d.bB[n]||d.bB.default;return"poe"===n?(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"wallpaper down-wallpaper-color divination-animation",children:[(0,r.jsx)(d.h4,{lng:t}),(0,r.jsx)(B,{lng:t,method:n,cardCounts:1})]})}):(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(D,{lng:t,method:n,selectedStyle:s})})}},678:function(e,t,n){"use strict";n.d(t,{$f:function(){return o},F1:function(){return i},Jk:function(){return a},Q2:function(){return r},Tl:function(){return s},tq:function(){return d}});let r="Ver. 2.1.1",s="max-w-screen-sm",a="https://miri-backend.vercel.app",c="MIRI",i="".concat(c,".").concat("client",".userDrawResult"),d="".concat(c,".").concat("sys",".spreadsData"),o={1:"▲",2:"▼",3:"⏹︎"}},425:function(e,t,n){"use strict";n.d(t,{$:function(){return m}});var r=n(1505),s=n(2265),a=n(2635),c=n(4457),i=n(5350),d=n(1520);let o=["en","tw"],l="translation",u="i18next";function m(e,t,n){let[r,i]=(0,c.fP)([u]),d=(0,a.$G)(t,n),{i18n:o}=d;{let[t,n]=(0,s.useState)(o.resolvedLanguage);(0,s.useEffect)(()=>{t!==o.resolvedLanguage&&n(o.resolvedLanguage)},[t,o.resolvedLanguage]),(0,s.useEffect)(()=>{e&&o.resolvedLanguage!==e&&o.changeLanguage(e)},[e,o]),(0,s.useEffect)(()=>{r.i18next!==e&&i(u,e,{path:"/"})},[e,r.i18next])}return d}r.ZP.use(a.Db).use(d.Z).use((0,i.Z)((e,t)=>n(8637)("./".concat(e,"/").concat(t,".json")))).init({...function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l;return{supportedLngs:o,fallbackLng:"en",lng:e,fallbackNS:l,defaultNS:l,ns:t}}(),lng:void 0,detection:{order:["path","htmlTag","cookie","navigator"]},preload:[]})},7907:function(e,t,n){"use strict";var r=n(5313);n.o(r,"useRouter")&&n.d(t,{useRouter:function(){return r.useRouter}}),n.o(r,"useSearchParams")&&n.d(t,{useSearchParams:function(){return r.useSearchParams}})}},function(e){e.O(0,[676,143,267,971,69,744],function(){return e(e.s=5377)}),_N_E=e.O()}]);